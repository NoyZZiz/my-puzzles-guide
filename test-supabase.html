<!DOCTYPE html>
<html>
<body>
<script src="/env.js"></script>
<script>
// This file reads Supabase env values from env.js (generated from .env)
// To generate env.js from your .env file, run:
// powershell -ExecutionPolicy Bypass -File scripts/generate-env-js.ps1
const SUPABASE_URL = window.__env?.SUPABASE_URL || 'https://qwxfmwnplweolpwqgtci.supabase.co';
const SUPABASE_KEY = window.__env?.SUPABASE_KEY || '';

async function testConnection() {
  try {
    if (!SUPABASE_KEY) {
      document.body.innerHTML = '<h2 style="color: orange;">⚠️ Supabase key not set</h2><p>Run <code>powershell -ExecutionPolicy Bypass -File scripts/generate-env-js.ps1</code> to generate <code>env.js</code> from <code>.env</code>, then refresh.</p>';
      return;
    }
    const response = await fetch(SUPABASE_URL + '/rest/v1/characters?select=*', {
      headers: {
        'apikey': SUPABASE_KEY,
        'Authorization': 'Bearer ' + SUPABASE_KEY
      }
    });
    
    const data = await response.json();
    console.log('✅ Supabase Connection Successful!', data);
    document.body.innerHTML = '<h2 style="color: green;">✅ Supabase Connected!</h2><pre>' + JSON.stringify(data, null, 2) + '</pre>';
  } catch (error) {
    console.error('❌ Connection Failed:', error);
    document.body.innerHTML = '<h2 style="color: red;">❌ Connection Failed</h2><p>' + error.message + '</p>';
  }
}

testConnection();
</script>
</body>
</html>
